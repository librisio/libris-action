# Libris Auto-Generate GitHub Action
<p>
    <img src="https://img.shields.io/badge/version-1.0.0-blue" alt="Libris">
    <img src="https://img.shields.io/badge/status-maintained-forestgreen" alt="Libris">
</p> 

**Boost productivity with Libris: Automatically generate comprehensive modern documentation for your projects.**

![Libris Docs Banner](https://raw.githubusercontent.com/librisio/.github/master/media/github/readme_banner_rounded.png)

# Libris
Seamlessly integrate Libris with your development workflow to guarantee your documentation remains up-to-date. Our action automates the generation of documentation each time you push to your repository, ensuring accuracy and consistency without manual effort.

* [x] Automatic Documentation Updates: Eliminates the need for manual updates, ensuring your documentation always matches your latest codebase.
* [x] Seamless Integration: Easily integrates with your existing GitHub workflow, making it a hassle-free addition to your development process.
* [x] Consistency and Accuracy: Maintains high standards of consistency and accuracy in documentation with every code change.
* [x] Time-Saving: Frees up valuable developer time by automating repetitive tasks, allowing your team to focus on development and innovation.

# Integrating the Action into Your Repository

To facilitate automatic documentation updates within your repository, the workflow action requires write permissions and access to the GitHub-generated `GITHUB_TOKEN` secret. This guide outlines the steps to seamlessly integrate this action into your workflow.

## Setting Up the GitHub Workflow File

Begin by creating a GitHub workflow action file named `libris.yaml` within the `.github/workflows` directory of your repository. This action automates the documentation generation process, ensuring your project's documentation remains up-to-date with every push.

### Configuration Inputs:

* `config`: Specify the relative path to your Libris configuration file, which can be either a JSON or JavaScript file.
* `output`: Define the relative path for the output of the generated documentation.
            **Important**: The action will overwrite existing data at this location, so ensure the output path is correctly specified to avoid unintended data loss.

Example Workflow File: .github/workflows/libris.yaml

```yaml
name: Libris - Generate Documentation

# Grant write permissions in order to write the generated documentation file to your repo.
permissions:
  contents: write

# Trigger on every push.
on: push

jobs:
  update-file:
    runs-on: ubuntu-latest
    steps:

      # Checkout.
      - name: Checkout code
        uses: actions/checkout@v4

      # Optionally install Node.js and dependencies.
      # - name: Setup Node.js
      #   uses: actions/setup-node@v4
      #   with:
      #     node-version: '20'
      # - name: Install Dependencies
      #   run: npm ci
      #   # run: npm install @librisio/libris
      
      # Generate documentation.
      - name: Libris - Generate Documentation
        uses: librisio/libris-action@main
        env:

          # Your secret github token.
          # This token is automatically generated by github.
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }} # 

          # Your Libris API Key.
          # Must manually be created under "Settings > Secrets and variables > Actions > New repository secret".
          LIBRIS_API_KEY: ${{ secrets.LIBRIS_API_KEY }}

        with:

          # The relative input path of your configuration file, may either be a JSON or JavaScript file.
          config: './docs/config.js'

          # The relative output path for the generated documentation file.
          output: './docs/index.html'
```

## Adding Your Libris API Key to Repository Secrets

For the action to access the Libris API, you must provide your Libris API Key as a secret in your repository.

1. Navigate to Settings > Secrets and variables > Actions in your repository.
2. Click New repository secret to add a new secret.
3. Name the secret LIBRIS_API_KEY and paste your Libris API Key into the value field.

For more details on obtaining your Libris API Key, consult the [Libris documentation](https://uselibris.io/docs?id=Authentication:API%20Key).

## Optional: Exclude Output from Version Control

To prevent unnecessary pull requests triggered by automated documentation updates, consider adding the output HTML file to your .gitignore. This step ensures that the generated documentation does not clutter your repository's version history.

Update .gitignore to Exclude the Documentation Output

```
docs/index.html
```




































# Integrating the action into your repository
In order to write the generated documentation to your repository, the workflow action will require write permission and access to the by github generated secret `GITHUB_TOKEN`.

## Create the github workflow file.
Create the workflow action file under `.github/workflows/libris.yaml`.

### Inputs:
* *config*: The relative path the JSON or JavaScript libris configuration file.
* *output*: The relative path to where the generated documentation will be saved. **WARNING**: Make sure the specified output path is properly defined. This workflow action will overwrite the file data at the specified output path.

###### .github/workflows/libris.yaml
```yaml
name: Libris - Generate Documentation

# Grant write permissions in order to write the generated documentation file to your repo.
permissions:
  contents: write

# Trigger on every push.
on: push

jobs:
  update-file:
    runs-on: ubuntu-latest
    steps:

      # Checkout.
      - name: Checkout code
        uses: actions/checkout@v4

      # Optionally install Node.js and dependencies.
      # - name: Setup Node.js
      #   uses: actions/setup-node@v4
      #   with:
      #     node-version: '20'
      # - name: Install Dependencies
      #   run: npm ci
      #   # run: npm install @librisio/libris
      
      # Generate documentation.
      - name: Libris - Generate Documentation
        uses: librisio/libris-action@main
        env:

          # Your secret github token.
          # This token is automatically generated by github.
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }} # 

          # Your Libris API Key.
          # Must manually be created under "Settings > Secrets and variables > Actions > New repository secret".
          LIBRIS_API_KEY: ${{ secrets.LIBRIS_API_KEY }}

        with:

          # The relative input path of your configuration file, may either be a JSON or JavaScript file.
          config: './docs/config.js'

          # The relative output path for the generated documentation file.
          output: './docs/index.html'
```

## Add the LIBRIS_API_KEY to your repository secrets.
Your Libris API Key must be defined in your repository secrets in order to access the Libris API.

To create a secret go to "Your repository -> Settings -> Secrets and variables -> Actions". Once there click the "New repository secret" to create a new secret. Assign the name `LIBRIS_API_KEY` to the secret and paste your Libris API Key into the value section.

More information about obtaining a Libris API Key can be found in the [documentation](https://uselibris.io/docs?id=Authentication:API%20Key).

## Add output to .gitignore (optional).
Since the workflow action writes the generated HTML file to your repository. It is advised to add the specified HTML output path to your `.gitignore`. Therefore, you will avoid the required pull requests after the workflow action has finished.

###### .gitinore
```
docs/index.html
```